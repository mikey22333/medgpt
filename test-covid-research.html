// Simple test for COVID-19 research
fetch('http://localhost:3001/api/research', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    query: "long-term effects of COVID-19 on cardiovascular system",
    maxResults: 8,
    includeAbstracts: true
  })
})
.then(response => response.json())
.then(data => {
  console.log('ğŸ“Š Research Results:');
  console.log(`Total papers: ${data.papers?.length || 0}`);
  
  if (data.papers && data.papers.length > 0) {
    console.log('\nğŸ“‘ Paper titles:');
    data.papers.forEach((paper, index) => {
      console.log(`${index + 1}. ${paper.title}`);
      console.log(`   Journal: ${paper.journal || 'Unknown'}`);
      console.log(`   Relevance: ${paper.relevanceScore || 'Unknown'}`);
    });
    
    // Check COVID relevance
    const covidPapers = data.papers.filter(paper => 
      paper.title?.toLowerCase().includes('covid') || 
      paper.title?.toLowerCase().includes('sars-cov-2') ||
      paper.abstract?.toLowerCase().includes('covid')
    );
    
    console.log(`\nâœ… COVID-19 related: ${covidPapers.length}/${data.papers.length}`);
    
    if (covidPapers.length === 0) {
      console.log('\nâŒ NO COVID PAPERS FOUND!');
      console.log('First paper title:', data.papers[0]?.title);
    }
  }
  
  if (data.error) {
    console.error('âŒ Error:', data.error);
  }
})
.catch(error => {
  console.error('âŒ Request failed:', error);
});

console.log('ğŸ§ª Testing COVID-19 research...');
